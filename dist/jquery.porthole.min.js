!function(t,e){if("function"==typeof define&&define.amd)define(["exports","jquery"],e);else if("undefined"!=typeof exports)e(exports,require("jquery"));else{var i={exports:{}};e(i.exports,t.jQuery),t.jqueryPorthole=i.exports}}(this,function(t,e){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(u){o=!0,r=u}finally{try{!n&&a["return"]&&a["return"]()}finally{if(o)throw r}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(e),a=function(){function t(e,i){n(this,t),this._options=e,this._viewport=i,this._initialized=!1,this.init()}return r(t,[{key:"init",value:function(){this._initialized===!1&&(this._initialized=!0,this._render(),this._posInit(),this._eventsBind())}},{key:"destroy",value:function(){this._initialized===!0&&(this._initialized=!1,this._eventsUnbind(),this._renderBack())}},{key:"update",value:function(){this.destroy(),this.init()}},{key:"_render",value:function(){void 0==this._container&&(this._$viewport=s["default"](this._viewport),this._container=this._$viewport.attr("id")+"-porthole-wrapper",this._$container=s["default"]('<div id="'+this._container+'" style="display: inline-block;">'+this._$viewport.html()+"</div>"),this._viewportOverflow=this._$viewport.css("overflow"),this._$viewport.css("overflow","hidden").html(this._$container))}},{key:"_renderBack",value:function(){void 0!=this._container&&(this._$viewport.html(this._$container.html()).css("overflow",this._containerviewportOverflow),this._container=null,this._$container=null,this._viewportOverflow=null)}},{key:"_posInit",value:function(){this.posMax={left:this._$viewport.width()-this._$container.width(),top:this._$viewport.height()-this._$container.height()},this.posCur={left:-this._options.start[0],top:-this._options.start[1]},this._posSet(this.posCur)}},{key:"_posGet",value:function(){var t=this,e=function(){var e=[],i=!0,n=!1,o=void 0;try{for(var r,s=t._$container.css("transform").split(", ").slice(-2)[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var a=r.value;e.push(parseInt(a))}}catch(u){n=!0,o=u}finally{try{!i&&s["return"]&&s["return"]()}finally{if(n)throw o}}return e}(),i=o(e,2),n=i[0],r=i[1];return{left:n,top:r}}},{key:"_posSet",value:function(t){var e=t.left,i=t.top,n=this.posMax,o=n.left,r=n.top;e=e>0?0:e,i=i>0?0:i,e=o>e?o:e,i=r>i?r:i,this._$container.css("transform","translate3d("+e+"px, "+i+"px, 0px)")}},{key:"_getXY",value:function(t){var e=t.pageX||t.originalEvent.touches[0].pageX,i=t.pageY||t.originalEvent.touches[0].pageY;return[e,i]}},{key:"_eventMousedown",value:function(t){var e=this;this.dragging=!0;var i=this._getXY(t),n=o(i,2),r=n[0],a=n[1];s["default"](document).on("touchmove."+this._container+" mousemove."+this._container,function(t){var i=e._getXY(t),n=o(i,2),s=n[0],u=n[1];e._posSet({left:s-r+e.posCur.left,top:u-a+e.posCur.top})})}},{key:"_eventMouseup",value:function(){this.dragging===!0&&(this.dragging=!1,this.posCur=this._posGet(),s["default"](document).off("touchmove."+this._container+" mousemove."+this._container))}},{key:"_eventsBind",value:function(){var t=this;this._$container.on("touchstart."+this._container+" mousedown."+this._container,function(e){t._eventMousedown(e)}),s["default"](document).on("touchend."+this._container+" mouseup."+this._container,function(){t._eventMouseup()})}},{key:"_eventsUnbind",value:function(){this._$container.off("."+this._container),s["default"](document).off("."+this._container)}}]),t}();s["default"].fn.porthole=function(t){return t=s["default"].extend({start:[0,0]},t),new a(t,this)}});