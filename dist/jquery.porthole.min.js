!function(t,e){if("function"==typeof define&&define.amd)define(["exports","jquery"],e);else if("undefined"!=typeof exports)e(exports,require("jquery"));else{var i={exports:{}};e(i.exports,t.jQuery),t.jqueryPorthole=i.exports}}(this,function(t,e){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(e),r=function(){function t(e,i){n(this,t),this.options=e,this.viewport=i,this.init()}return o(t,[{key:"init",value:function(){"undefined"==typeof this.initialized&&(this.$viewport=s["default"](this.viewport),this.render(),this.posInit(),this.eventsBind(),this.options.callback(this),this.initialized=!0)}},{key:"destroy",value:function(){this.initialized===!0&&(this.eventsUnbind(),this.renderBack(),this.initialized=void 0)}},{key:"update",value:function(){this.destroy(),this.init()}},{key:"render",value:function(){"undefined"==typeof this.container&&(this.container=this.$viewport.attr("id")+"-porthole-wrapper",this.$container=s["default"]('<div id="'+this.container+'" style="display: inline-block;">'+this.$viewport.html()+"</div>"),this.viewportOverflow=this.$viewport.css("overflow"),this.$viewport.css("overflow","hidden").html(this.$container))}},{key:"renderBack",value:function(){"undefined"!=typeof this.container&&(this.$viewport.html(this.$container.html()).css("overflow",this.viewportOverflow),this.container=void 0,this.$container=void 0,this.viewportOverflow=void 0)}},{key:"posInit",value:function(){this.posCur=[-this.options.start[0],-this.options.start[1]],this.posMax=[this.$viewport.width()-this.$container.width(),this.$viewport.height()-this.$container.height()],this.posSet(this.posCur[0],this.posCur[1])}},{key:"posGet",value:function(){return this.$container.css("transform").split(", ").slice(-2).map(function(t){return parseInt(t)})}},{key:"posSet",value:function(t,e){t=t>0?0:t,e=e>0?0:e,t=t<this.posMax[0]?this.posMax[0]:t,e=e<this.posMax[1]?this.posMax[1]:e,this.$container.css("transform","translate3d("+t+"px, "+e+"px, 0px)")}},{key:"eventMousedown",value:function(t){var e=this;this.dragging=!0;var i=t.pageX,n=t.pageY,o=function(t){e.posSet(t.pageX-i+e.posCur[0],t.pageY-n+e.posCur[1])};$.throttle?s["default"](document).on("mousemove."+this.container,$.throttle(20,!0,function(t){o(t)})):s["default"](document).on("mousemove."+this.container,function(t){o(t)})}},{key:"eventMouseup",value:function(){this.dragging===!0&&(this.dragging=!1,this.posCur=this.posGet(),s["default"](document).off("mousemove."+this.container))}},{key:"eventsBind",value:function(){var t=this;this.$container.on("mousedown."+this.container,function(e){t.eventMousedown(e)}),s["default"](document).on("mouseup."+this.container,function(){t.eventMouseup()})}},{key:"eventsUnbind",value:function(){this.$container.off("mousedown."+this.container),s["default"](document).off("mouseup."+this.container).off("mousemove."+this.container)}}]),t}();s["default"].fn.porthole=function(t){return t=s["default"].extend({start:[0,0],callback:void 0},t),new r(t,this)}});