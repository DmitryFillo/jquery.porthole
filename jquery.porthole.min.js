/*
    Simple Viewport Plugin
    Version: 1.0.0

    It is licensed under BSD Licence.
    The license text can be found at https://github.com/DmitryPhilimonov/jquery.porthole/blob/master/LICENSE

    Author: Mr. Fillo
	    fillo at fillo dot me

    Website: http://plugins.jquery.com/porthole/
*/
(function(a){a.fn.porthole=function(e){function h(b,c){this.maxPos=[a(b).width()-a(c).width(),a(b).height()-a(c).height()];this.curPos=this.getPos(c)}if(void 0==a.portholeStatus)a.portholeStatus=!0;else return!1;e=a.extend({start:[0,0],callback:void 0},e);e.start=e.start.map(function(a){return-a});var f=a(this).attr("id")+"-porthole-wrapper";h.prototype={maxPos:[],curPos:[],getPos:function(b){b=[a(b).css("left"),a(b).css("top")].map(function(a){return a.replace(/px/g,"")});return[parseInt(b[0]),parseInt(b[1])]},
setPos:function(b,c,d){c=0<c?0:c;d=0<d?0:d;c=c<this.maxPos[0]?this.maxPos[0]:c;d=d<this.maxPos[1]?this.maxPos[1]:d;a(b).css({left:c+"px",top:d+"px"})}};var g=!1;a(this).mousedown(function(b){g=!0;var c=b.pageX,d=b.pageY;b=function(b){a.portholeWrapper.setPos("#"+f,b.pageX-c+a.portholeWrapper.curPos[0],b.pageY-d+a.portholeWrapper.curPos[1])};a.throttle?a(document).mousemove(a.throttle(20,!0,b)):a(document).mousemove(b)});a(document).mouseup(function(){if(!0==g)g=!1,a(document).unbind("mousemove"),
a.portholeWrapper.curPos=a.portholeWrapper.getPos("#"+f);else return!1});a(this).css({display:"none",overflow:"hidden"}).html('<div id="'+f+'" style="display: inline-block; position: relative; left: '+e.start[0]+"px; top: "+e.start[1]+'px;">'+a(this).html()+"</div>").show(0,function(){a.portholeWrapper=new h(this,"#"+f);void 0!=e.callback&&e.callback()})}})(jQuery);
